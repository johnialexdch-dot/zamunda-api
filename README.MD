# Zamunda API

Това е API, създадено с помощта на **FastAPI**, което позволява извършване на заявки към Zamunda с опция за кеширане на резултатите. API-то поддържа търсене с кеш, принудително търсене и връщане на магнитни връзки.

---

## Изисквания

- Python 3.8 или по-нова версия.
- Модули `fastapi`, `uvicorn`,`beautifulsoup4` и `requests`.

---

## Инсталация

1. **Клониране на проекта**:
   ```bash
   git clone <репо линк>
   cd <папка на проекта>
   ```
2. **Инсталиране на зависимости**
    ``` 
    pip install -r requirements.txt 
    ```
3. **Алтернатива с Докър**
    ```
    # Използваме официалния Python образ като базов
    FROM python:3.9-slim

    # Задаваме работната директория в контейнера
    WORKDIR /app

    # Копираме requirements файла в контейнера
    COPY requirements.txt .

    # Инсталираме необходимите зависимости
    RUN pip install --no-cache-dir -r requirements.txt

    # Копираме целия проект в контейнера
    COPY . .

    # Отваряме порт 8000 за достъп до приложението
    EXPOSE 8000

    # Стартираме приложението чрез Uvicorn
    CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]

    ```
    ```
    docker build -t zamunda-api .
    ```
    ```
    docker run -d -p 8000:8000 zamunda-api
    ```

### Стартиране на сървъра
За да стартирате сървъра, изпълнете следната команда:
```
python main.py
```
По подразбиране, сървърът ще бъде достъпен на адрес: http://localhost:8000.

### Ендпойнти

```GET /search```
#### Параметри

| Име           | Тип     | Описание                                              |
| :------------ | :------ | :---------------------------------------------------- |
| `q`           | `str`   | Търсена заявка.                                       |
| `user`        | `str`   | Потребителско име за Zamunda.                         |
| `password`    | `str`   | Парола за Zamunda.                                    |
| `force_search`| `bool`  | Принуждава ново търсене, като игнорира кеша.          |
| `provide_magnet`| `bool`| Ако е True, включва магнитни линкове в резултата.     |

#### Примерна заявка
```bash
curl "http://localhost:8000/search?q=Deadpool%202024&user={вашето_име}&password={вашата_парола}&force_search=true&provide_magnet=true"
```

#### Примерен отговор
```
[
  {
    "name": "Deadpool & Wolverine / Дедпул и Върколака (2024)",
    "magnetlink": "magnet:?xt=urn:btih:...",
    "seeders": "673",
    "bg_audio": false
  }
]
```

### Кеширане
Отговорите се кешират за 60 минути. Ако желаете да извършите ново търсене и да игнорирате кеша, използвайте параметъра `force_search=true`.

## Disclaimer

Това **API** използва **скрапинг** за извличане на данни от Zamunda. Моля, имайте предвид, че използването на скрапери може да нарушава правилата на уебсайтовете или да доведе до натоварване на техните сървъри. Използвайте това **API** отговорно.

**API-то** е предназначено за лична употреба и не гарантира стабилност или съвместимост с бъдещи версии на Zamunda.

## Contributing
PR-ите в този проект са добре дошли!